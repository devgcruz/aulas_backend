<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apostila Interativa de APIs: REST e HTTP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Slate & Teal -->
    <!-- Application Structure Plan: A single-page application with a fixed top navigation bar for easy access to different sections. The structure is thematic rather than strictly linear: 1) A conceptual introduction combining API and REST definitions with clear analogies. 2) An interactive core section using tabs for each HTTP verb (GET, POST, PUT, DELETE). Each tab allows users to see the explanation, the code, and execute it in real-time to see the API response, fostering active learning. 3) A summary section. This structure was chosen to allow both linear learning for beginners and quick access for users wanting to review a specific verb, making it more usable than a static document. -->
    <!-- Visualization & Content Choices: Report Info: API/REST concepts, HTTP Verbs, Python examples. Goal: Teach these concepts interactively. Viz/Presentation Method: The main content is presented in styled cards. The core interaction is a "live code" block for each HTTP verb, where each line is clickable for an explanation. A simple diagram of the request-response cycle is created with HTML/Tailwind. Interaction: A "Run Code" button triggers a fetch() call to the live JSONPlaceholder API. The response (status code and JSON body) is then dynamically rendered in a dedicated output area. This provides immediate feedback. Justification: This transforms passive reading into an active, hands-on experiment, which is far more effective for learning technical concepts. Library/Method: Vanilla JavaScript for all interactions (DOM manipulation, fetch API). Tailwind CSS for all styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            overflow-x: auto;
        }
        .code-block pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .code-line {
            padding: 0.1rem 0.5rem;
            margin: 0 -0.5rem;
            border-radius: 0.25rem;
            transition: background-color 0.2s;
        }
        .code-line.clickable:hover {
            background-color: #334155;
            cursor: pointer;
        }
        .code-block .comment { color: #64748b; }
        .code-block .keyword { color: #93c5fd; }
        .code-block .string { color: #a5b4fc; }
        .code-block .function { color: #6ee7b7; }
        .code-block .variable { color: #fde047; }
        .output-block {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            margin-top: 0.5rem;
        }
        .tab-button.active {
            border-color: #0d9488;
            color: #0d9488;
            font-weight: 600;
        }
        #explanation-box::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 100%;
            margin-top: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: transparent #1e293b transparent transparent;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header & Navigation -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-teal-700">Apostila Interativa de APIs</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#conceitos" class="text-slate-600 hover:bg-teal-50 hover:text-teal-700 px-3 py-2 rounded-md text-sm font-medium">Conceitos</a>
                        <a href="#verbos" class="text-slate-600 hover:bg-teal-50 hover:text-teal-700 px-3 py-2 rounded-md text-sm font-medium">Verbos HTTP</a>
                        <a href="#resumo" class="text-slate-600 hover:bg-teal-50 hover:text-teal-700 px-3 py-2 rounded-md text-sm font-medium">Resumo</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Section: Conceitos -->
        <section id="conceitos" class="mb-16">
            <h2 class="text-3xl font-bold tracking-tight text-slate-900 mb-2">O que é uma API?</h2>
            <p class="text-lg text-slate-600 mb-8 max-w-3xl">Para começar, vamos entender o papel fundamental das APIs e do padrão REST na comunicação entre softwares. Eles funcionam como um conjunto de regras e um intermediário que permite que sistemas diferentes conversem de forma padronizada e eficiente.</p>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-semibold mb-3">API: O Garçom Digital</h3>
                    <p class="mb-4">Imagine que você está em um restaurante. Você (seu aplicativo) quer um prato da cozinha (o servidor). Você não pode simplesmente entrar na cozinha; você precisa de um intermediário.</p>
                    <p>A **API (Interface de Programação de Aplicações)** é esse garçom. Você faz um pedido (requisição), ele leva à cozinha, e traz o prato pronto (resposta). A API é a mensageira que permite que softwares conversem sem precisar conhecer os detalhes internos um do outro.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-semibold mb-3">REST: A Organização da Cozinha</h3>
                    <p class="mb-4">Ok, temos o garçom (API). Mas como o pedido deve ser feito? O **REST (Representational State Transfer)** é um conjunto de boas práticas para organizar essa comunicação, como um cardápio bem estruturado.</p>
                    <p>No REST, tudo é um **recurso** (produtos, clientes, etc.), identificado por um endereço único (endpoint), como `/produtos/123`. Isso torna a comunicação previsível e escalável.</p>
                </div>
            </div>
        </section>

        <!-- Section: Verbos HTTP -->
        <section id="verbos" class="mb-16">
            <h2 class="text-3xl font-bold tracking-tight text-slate-900 mb-2">As Ações: Verbos HTTP</h2>
            <p class="text-lg text-slate-600 mb-8 max-w-3xl">Quando você faz um pedido, precisa especificar a ação desejada. Os Verbos HTTP são os comandos que dizem à API o que fazer com um recurso. Clique nas linhas de código para ver uma explicação detalhada!</p>

            <div class="bg-white rounded-lg shadow-md">
                <div class="border-b border-slate-200">
                    <nav class="-mb-px flex space-x-4 p-4" aria-label="Tabs">
                        <button class="tab-button active" data-tab="get">GET</button>
                        <button class="tab-button" data-tab="post">POST</button>
                        <button class="tab-button" data-tab="put">PUT</button>
                        <button class="tab-button" data-tab="delete">DELETE</button>
                    </nav>
                </div>
                <div class="p-6">
                    <div id="tab-content-wrapper" class="md:flex md:gap-6">
                        <div id="tab-content" class="flex-grow">
                            <!-- Conteúdo da aba (código e botão) será inserido aqui -->
                        </div>
                        <div class="relative w-full md:w-1/3 mt-6 md:mt-0">
                             <div id="explanation-box" class="hidden sticky top-24 bg-slate-800 text-white p-4 rounded-lg shadow-xl z-10">
                                <h5 id="explanation-title" class="font-bold text-teal-300 mb-2"></h5>
                                <p id="explanation-text" class="text-sm mb-3"></p>
                                <p id="explanation-analogy" class="text-sm italic opacity-80 border-t border-slate-600 pt-3"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Resumo -->
        <section id="resumo">
            <h2 class="text-3xl font-bold tracking-tight text-slate-900 mb-2">Resumindo a Ópera</h2>
            <p class="text-lg text-slate-600 mb-8 max-w-3xl">Parabéns! Você explorou os fundamentos das APIs de forma interativa. Com estes conceitos, você está pronto para interagir com as milhares de APIs disponíveis na internet.</p>

            <div class="bg-white p-8 rounded-lg shadow-md space-y-4">
                <p class="text-xl">A **API** é o <span class="font-semibold text-teal-700">garçom</span> que conecta seu aplicativo à fonte de dados.</p>
                <p class="text-xl">O **REST** é o <span class="font-semibold text-teal-700">cardápio organizado</span> que define como os pedidos devem ser feitos.</p>
                <p class="text-xl">Os **Verbos HTTP** (GET, POST, PUT, DELETE) são as <span class="font-semibold text-teal-700">ações</span> que você pede ao garçom.</p>
            </div>
        </section>
    </main>

    <footer class="bg-slate-100 mt-16">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-slate-500">
            <p>Apostila Interativa de APIs - Desenvolvido por Guizinho dos PC.</p>
        </div>
    </footer>
    
<script>
document.addEventListener('DOMContentLoaded', () => {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContentContainer = document.getElementById('tab-content');
    const explanationBox = document.getElementById('explanation-box');
    const explanationTitle = document.getElementById('explanation-title');
    const explanationText = document.getElementById('explanation-text');
    const explanationAnalogy = document.getElementById('explanation-analogy');

    const explanations = {
        import_requests: { title: "import requests", text: "Importa a biblioteca 'requests', que nos dá as ferramentas para fazer requisições HTTP (pedidos para a API).", analogy: "<strong>Analogia:</strong> É como pegar o cardápio. Você precisa da ferramenta (o cardápio) antes de poder fazer um pedido." },
        import_json: { title: "import json", text: "Importa a biblioteca 'json', usada para trabalhar com o formato de dados JSON. Embora 'requests' já faça muito disso, é bom saber que ela existe.", analogy: "<strong>Analogia:</strong> É como aprender a ler a 'linguagem do cardápio' para entender os ingredientes." },
        define_url: { title: "url = ...", text: "Define o endereço (endpoint) do recurso na API com o qual queremos interagir.", analogy: "<strong>Analogia:</strong> É apontar para o item exato no cardápio que você quer pedir." },
        req_get: { title: "requests.get(url)", text: "Executa a ação GET (buscar/ler) no endereço especificado. A API irá devolver uma resposta.", analogy: "<strong>Analogia:</strong> É efetivamente chamar o garçom e dizer: 'Eu quero ler as informações sobre este prato'." },
        print_json: { title: "print(response.json())", text: "Pega a resposta da API, converte o corpo dela (que está em formato JSON) para um dicionário Python e o imprime.", analogy: "<strong>Analogia:</strong> É quando o garçom traz a descrição do prato e você a lê em voz alta." },
        define_dict: { title: "dicionario = { ... }", text: "Cria um dicionário em Python com os dados que queremos enviar para a API.", analogy: "<strong>Analogia:</strong> É anotar em um guardanapo os detalhes do prato personalizado que você quer criar." },
        req_post: { title: "requests.post(url, json=...)", text: "Executa a ação POST (criar) no endereço, enviando os dados do dicionário no corpo da requisição.", analogy: "<strong>Analogia:</strong> É entregar a anotação ao garçom e dizer: 'Crie um novo pedido com estas especificações'." },
        req_put: { title: "requests.put(url, json=...)", text: "Executa a ação PUT (substituir) em um recurso existente, enviando os novos dados completos.", analogy: "<strong>Analogia:</strong> É dizer ao garçom: 'Esqueça meu pedido anterior para este item e o substitua por este novo'." },
        req_delete: { title: "requests.delete(url)", text: "Executa a ação DELETE (apagar) no recurso especificado.", analogy: "<strong>Analogia:</strong> É dizer ao garçom: 'Por favor, cancele este item do meu pedido'." },
        print_status: { title: "print(f\"Status: {response.status_code}\")", text: "Imprime o código de status da resposta, que nos diz se o pedido foi bem-sucedido (200), criado (201), ou se deu erro (404, 500, etc).", analogy: "<strong>Analogia:</strong> É a resposta curta do garçom: 'Ok!', 'Anotado!', ou 'Desculpe, não temos mais esse prato'." },
    };

    const content = {
        get: {
            title: 'GET: Para Consultar Dados',
            description: 'Pede para ler ou buscar uma informação. É uma operação segura, que não altera nada no servidor.',
            code: [
                { line: `<span class="comment"># Importa a biblioteca</span>` },
                { line: `<span class="keyword">import</span> requests`, key: 'import_requests' },
                { line: `` },
                { line: `<span class="comment"># URL do recurso que queremos buscar</span>` },
                { line: `<span class="variable">url</span> = <span class="string">"https://jsonplaceholder.typicode.com/posts/1"</span>`, key: 'define_url' },
                { line: `` },
                { line: `<span class="comment"># Faz a requisição GET</span>` },
                { line: `<span class="variable">response</span> = requests.<span class="function">get</span>(url)`, key: 'req_get' },
                { line: `` },
                { line: `<span class="comment"># Imprime o resultado</span>` },
                { line: `<span class="function">print</span>(response.<span class="function">json</span>())`, key: 'print_json' },
            ],
            run: async () => {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                return { status: response.status, data: await response.json() };
            }
        },
        post: {
            title: 'POST: Para Criar Dados',
            description: 'Envia dados para o servidor para criar um novo recurso.',
            code: [
                { line: `<span class="keyword">import</span> requests` , key: 'import_requests' },
                { line: `` },
                { line: `<span class="variable">url</span> = <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>`, key: 'define_url' },
                { line: `<span class="variable">nova_postagem</span> = {`, key: 'define_dict' },
                { line: `    <span class="string">'title'</span>: <span class="string">'Minha Nova Postagem'</span>,`, key: 'define_dict' },
                { line: `    <span class="string">'body'</span>: <span class="string">'Conteúdo via API!'</span>,`, key: 'define_dict' },
                { line: `    <span class="string">'userId'</span>: 1`, key: 'define_dict' },
                { line: `}`, key: 'define_dict' },
                { line: `` },
                { line: `<span class="variable">response</span> = requests.<span class="function">post</span>(url, json=nova_postagem)`, key: 'req_post' },
                { line: `` },
                { line: `<span class="function">print</span>(response.<span class="function">json</span>())`, key: 'print_json' },
            ],
            run: async () => {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    body: JSON.stringify({ title: 'Minha Nova Postagem', body: 'Conteúdo via API!', userId: 1 }),
                    headers: { 'Content-type': 'application/json; charset=UTF-8' },
                });
                return { status: response.status, data: await response.json() };
            }
        },
        put: {
            title: 'PUT: Para Atualizar Dados',
            description: 'Envia dados para substituir completamente um recurso que já existe.',
            code: [
                { line: `<span class="keyword">import</span> requests`, key: 'import_requests' },
                { line: `` },
                { line: `<span class="variable">url</span> = <span class="string">"https://jsonplaceholder.typicode.com/posts/1"</span>`, key: 'define_url' },
                { line: `<span class="variable">post_atualizado</span> = {`, key: 'define_dict' },
                { line: `    <span class="string">'id'</span>: 1,`, key: 'define_dict' },
                { line: `    <span class="string">'title'</span>: <span class="string">'Título Atualizado'</span>,`, key: 'define_dict' },
                { line: `    <span class="string">'body'</span>: <span class="string">'Conteúdo modificado.'</span>,`, key: 'define_dict' },
                { line: `    <span class="string">'userId'</span>: 1`, key: 'define_dict' },
                { line: `}`, key: 'define_dict' },
                { line: `` },
                { line: `<span class="variable">response</span> = requests.<span class="function">put</span>(url, json=post_atualizado)`, key: 'req_put' },
                { line: `` },
                { line: `<span class="function">print</span>(response.<span class="function">json</span>())`, key: 'print_json' },
            ],
            run: async () => {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1', {
                    method: 'PUT',
                    body: JSON.stringify({ id: 1, title: 'Título Atualizado', body: 'Conteúdo modificado.', userId: 1 }),
                    headers: { 'Content-type': 'application/json; charset=UTF-8' },
                });
                return { status: response.status, data: await response.json() };
            }
        },
        delete: {
            title: 'DELETE: Para Apagar Dados',
            description: 'Pede para remover um recurso específico.',
            code: [
                { line: `<span class="keyword">import</span> requests`, key: 'import_requests' },
                { line: `` },
                { line: `<span class="variable">url</span> = <span class="string">"https://jsonplaceholder.typicode.com/posts/1"</span>`, key: 'define_url' },
                { line: `` },
                { line: `<span class="comment"># Faz a requisição DELETE</span>` },
                { line: `response = requests.<span class="function">delete</span>(url)`, key: 'req_delete' },
                { line: `` },
                { line: `<span class="comment"># A resposta geralmente é vazia</span>` },
                { line: `<span class="function">print</span>(f<span class="string">"Status Code: {response.status_code}"</span>)`, key: 'print_status' },
            ],
            run: async () => {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1', { method: 'DELETE' });
                return { status: response.status, data: await response.json() };
            }
        }
    };

    function renderTabContent(tabKey) {
        const tabData = content[tabKey];
        const codeHtml = tabData.code.map(c => 
            `<div class="code-line ${c.key ? 'clickable' : ''}" ${c.key ? `data-key="${c.key}"` : ''}>${c.line || '&nbsp;'}</div>`
        ).join('');

        tabContentContainer.innerHTML = `
            <h3 class="text-2xl font-semibold mb-3">${tabData.title}</h3>
            <p class="mb-4 text-slate-600">${tabData.description}</p>
            <div class="mb-4">
                <h4 class="font-semibold mb-2">Exemplo de Código Python:</h4>
                <div class="code-block" id="code-container">${codeHtml}</div>
            </div>
            <div class="flex items-center gap-4">
                 <button class="run-code-btn bg-teal-600 text-white font-semibold px-4 py-2 rounded-md hover:bg-teal-700 transition-colors" data-key="${tabKey}">
                    Executar Código
                </button>
                <div class="loader hidden" role="status">
                    <svg aria-hidden="true" class="w-6 h-6 text-gray-200 animate-spin dark:text-gray-600 fill-teal-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0492C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/></svg><span class="sr-only">Loading...</span></div>
            </div>
            <div class="output-block rounded-md hidden"></div>
        `;
        attachEventListeners();
    }

    function attachEventListeners() {
        document.querySelector('.run-code-btn')?.addEventListener('click', handleRunCode);
        document.getElementById('code-container')?.addEventListener('click', handleCodeClick);
    }

    async function handleRunCode(e) {
        const key = e.target.dataset.key;
        const outputBlock = document.querySelector('.output-block');
        const loader = document.querySelector('.loader');
        const runButton = e.target;

        outputBlock.classList.add('hidden');
        outputBlock.innerHTML = '';
        loader.classList.remove('hidden');
        runButton.disabled = true;
        explanationBox.classList.add('hidden');

        try {
            const result = await content[key].run();
            const statusColor = result.status >= 200 && result.status < 300 ? 'text-green-600' : 'text-red-600';
            outputBlock.innerHTML = `<div class="p-4"><h4 class="font-semibold mb-2">Resposta da API:</h4><p class="mb-2">Status Code: <span class="font-bold ${statusColor}">${result.status}</span></p><div class="code-block"><pre>${JSON.stringify(result.data, null, 2)}</pre></div></div>`;
        } catch (error) {
             outputBlock.innerHTML = `<div class="p-4"><h4 class="font-semibold mb-2 text-red-600">Erro na Requisição:</h4><div class="code-block">${error.message}</div></div>`;
        } finally {
            loader.classList.add('hidden');
            outputBlock.classList.remove('hidden');
            runButton.disabled = false;
        }
    }

    function handleCodeClick(e) {
        const line = e.target.closest('.code-line.clickable');
        if (!line) {
            return;
        }
        
        const key = line.dataset.key;
        const explanation = explanations[key];

        if (explanation) {
            explanationTitle.textContent = explanation.title;
            explanationText.textContent = explanation.text;
            explanationAnalogy.innerHTML = explanation.analogy;
            explanationBox.classList.remove('hidden');
        }
    }
    
    document.body.addEventListener('click', (e) => {
        const wrapper = document.getElementById('tab-content-wrapper');
        if (wrapper && !wrapper.contains(e.target)) {
            explanationBox.classList.add('hidden');
        }
    });

    tabButtons.forEach(button => {
        button.style.borderBottom = '2px solid transparent';
        button.style.padding = '0.5rem 1rem';
        button.style.transition = 'all 0.2s';
        
        button.addEventListener('click', (e) => {
            tabButtons.forEach(btn => btn.classList.remove('active'));
            e.target.classList.add('active');
            explanationBox.classList.add('hidden');
            renderTabContent(e.target.dataset.tab);
        });
    });

    renderTabContent('get');
});
</script>
</body>
</html>
